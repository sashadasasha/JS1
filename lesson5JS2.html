<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title> Урок 5 Задание 2</title>
  <style>
    div {
      display: flex;
      justify-content: center;
      align-items: center;
    }

    p {
      font-size: 25px;
      color: blue;
      font-weight: bold;
    }
  </style>
</head>

<body>
  <div id="cart"></div>
  <script>
    "use strict";

    //У меня все сделано объектом, потому что мне так легче понять, как потом с этим работать через события DOM,
    //когда мы по клику будем добавлять товары, так легче добавить именно туда, куда нужно. Я понимаю, что можно сделать
    // массивом часть products, но не могу понять, как это сделать эффективно.

    /**
     * @description Объект содержит информацию обо всех продуктах в корзине, изначальную сумму = 0, функцию подсчета суммы
     * @type {{cartSum: number, countBasketPrice: (function(): number), cartText: cart.cartText,
     * products:
     * {product2: {amount: number, price: number, name: string},
     * product1: {amount: number, price: number, name: string},
     * product4: {amount: number, price: number, name: string},
     * product3: {amount: number, price: number, name: string}}}}
     */

    const cart = {
      products: {
        product1: {
          name: "milk",
          price: 30,
          amount: 1,
        },
        product2: {
          name: "butter",
          price: 180,
          amount: 2,
        },
        product3: {
          name: "bread",
          price: 15,
          amount: 1,
        },
        product4: {
          name: "kefir",
          price: 35,
          amount: 3,
        },
      },
      cartSum: 0,

      /**
       *@description Функция подсчета суммы всех продуктов, лежащих в корзине
       *
       *@returns {number} Функция возвращает сумму всех товаров корзины с учетом их количества
       */

      countBasketPrice: function () {
        for (let prod in this.products) {
          this.cartSum += this.products[prod].price * this.products[prod].amount;
        }
        return this.cartSum;
      },

      /**
       *@description Функция для генерации текста, в зависимости от наполненности корзины
       */

      cartText: function () {
        const cartMessageField = document.getElementById('cart');
        const cartMessage = document.createElement('p');
        cartMessageField.appendChild(cartMessage);
        let text;
        if (this.countBasketPrice() === 0) {
          text = "Your cart is empty";
        } else {
          text = `Sum of your cart = ${this.cartSum} dollars`;
        }
        cartMessage.textContent = text;
      }
    };

    cart.cartText();
  </script>
</body>

</html>